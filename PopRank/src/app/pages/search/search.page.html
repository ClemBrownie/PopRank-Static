<ion-header [translucent]="true">
  <ion-toolbar>
    <div class="header-content">
      <ion-img src="/assets/logo.png" alt="PopRank Logo" class="header-logo"></ion-img>
      <div class="header-title">
        <h1>PopRank</h1>
        <span class="page-subtitle">Recherche</span>
      </div>
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Recherche</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="page-container">
    <div class="search-container">
    <div class="search-bar-container">
      <ion-searchbar 
        placeholder="Rechercher un film..."
        [(ngModel)]="searchQuery"
        (ionInput)="onSearchInput($event)"
        show-clear-button="focus"
        class="search-input">
      </ion-searchbar>
      <ion-button 
        (click)="onSearch()" 
        [disabled]="!searchQuery.trim() || loading"
        class="search-button"
        fill="solid">
        <ion-icon name="search" slot="start"></ion-icon>
        Rechercher
      </ion-button>
    </div>

    <div *ngIf="loading" class="loading-container">
      <ion-spinner></ion-spinner>
      <p>Recherche en cours...</p>
    </div>

    <div *ngIf="hasSearched && !loading && movies.length > 0" class="search-results-header">
      <h3>Résultats de recherche</h3>
      <p class="search-results-count">{{ movies.length }} film(s) trouvé(s)</p>
    </div>

    <div *ngIf="hasSearched && !loading && movies.length > 0" class="movies-grid">
      <ion-card *ngFor="let movie of movies" (click)="goToMovie(movie.id)" class="movie-card">
        <ion-img [src]="getImageUrl(movie.poster_path)" [alt]="movie.title"></ion-img>
        <ion-card-header>
          <ion-card-title>{{ movie.title }}</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>{{ movie.release_date | date:'yyyy' }}</p>
          <p class="rating">⭐ {{ movie.vote_average | number:'1.1-1' }}/10</p>
        </ion-card-content>
      </ion-card>
    </div>

    <div *ngIf="hasSearched && !loading && movies.length === 0" class="empty-state">
      <ion-icon name="search" size="large"></ion-icon>
      <p>Aucun film trouvé</p>
      <p>Essayez avec d'autres mots-clés</p>
      <ion-button (click)="clearSearch()" fill="clear" class="clear-button">
        <ion-icon name="refresh" slot="start"></ion-icon>
        Nouvelle recherche
      </ion-button>
    </div>

    <div *ngIf="!hasSearched" class="empty-state">
      <div class="logo-container">
        <ion-img src="/assets/logo.png" alt="PopRank Logo" class="logo"></ion-img>
      </div>
      <p>Recherchez un film pour commencer</p>
      <p>Tapez le titre d'un film et cliquez sur "Rechercher"</p>
    </div>
    </div>
  </div>
</ion-content>
